CREATE TABLE store(
id INT UNSIGNED NOT NULL AUTO_INCREMENT,
displayName VARCHAR(50) NOT NULL,
active CHAR(1) DEFAULT 'Y' NOT  NULL,
store_address VARCHAR(100) NOT NULL,
operating_hrs VARCHAR(100) NOT NULL,
lease_copy_loc VARCHAR(100) NOT NULL,
store_notes VARCHAR(100) NULL default 'Store Notes in DB',
contact_details VARCHAR(100) NULL default 'Contact Details in DB',
updated_by INT UNSIGNED NOT NULL,
updated_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY(id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE blobs(
id INT UNSIGNED NOT NULL AUTO_INCREMENT,
linked_to_id INT UNSIGNED NOT NULL,
fileName VARCHAR(50) NOT NULL,
blobKey VARCHAR(50) NOT NULL,
tab ENUM('store', 'maintenance','photo') DEFAULT 'store',
active CHAR(1) DEFAULT 'Y' NOT  NULL,
updated_by INT UNSIGNED NOT NULL,
updated_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY(id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE store_maintenance(
id INT UNSIGNED NOT NULL AUTO_INCREMENT,
store_id INT UNSIGNED NOT NULL,
date DATE,
notes VARCHAR(200),
m_problem VARCHAR(50),
m_company VARCHAR(50),
m_phone VARCHAR(20),
active CHAR(1) DEFAULT 'Y' NOT  NULL,
updated_by INT UNSIGNED NOT NULL DEFAULT 1,
updated_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY(id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

create table store_key(
id INT UNSIGNED NOT NULL AUTO_INCREMENT,
store_id INT UNSIGNED NOT NULL,
name VARCHAR(20),
type VARCHAR(30),
position VARCHAR(20),
notes VARCHAR(100),
active CHAR(1) DEFAULT 'Y' NOT  NULL,
updated_by INT UNSIGNED NOT NULL DEFAULT 1,
updated_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY(id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;


create table store_alarm(
id INT UNSIGNED NOT NULL AUTO_INCREMENT,
store_id INT UNSIGNED NOT NULL,
name VARCHAR(30),
code VARCHAR(10),
position VARCHAR(20),
notes VARCHAR(100),
active CHAR(1) DEFAULT 'Y' NOT  NULL,
updated_by INT UNSIGNED NOT NULL DEFAULT 1,
updated_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY(id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

create table store_date(
id INT UNSIGNED NOT NULL AUTO_INCREMENT,
store_id INT UNSIGNED NOT NULL,
imp_date DATE,
active CHAR(1) DEFAULT 'Y' NOT  NULL,
updated_by INT UNSIGNED NOT NULL DEFAULT 1,
updated_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY(id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

commit;


CREATE TABLE employee_salary(
id INT UNSIGNED NOT NULL AUTO_INCREMENT,
employee_id INT UNSIGNED NOT NULL,
store_id INT UNSIGNED NOT NULL,
increment_amt DECIMAL(5,2),
increment_date DATE,
salary_bef_inc DECIMAL(5,2),
salary_aft_inc DECIMAL(5,2),
notes VARCHAR(100),
active CHAR(1) DEFAULT 'Y' NOT  NULL,
updated_by INT UNSIGNED NOT NULL,
updated_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY(id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE employee_discipline(
id INT UNSIGNED NOT NULL AUTO_INCREMENT,
employee_id INT UNSIGNED NOT NULL,
store_id INT UNSIGNED NOT NULL,
info VARCHAR(100),
info_type ENUM('disc','good') DEFAULT 'disc',
active CHAR(1) DEFAULT 'Y' NOT  NULL,
updated_by INT UNSIGNED NOT NULL,
updated_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY(id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE employee_leaves(
id INT UNSIGNED NOT NULL AUTO_INCREMENT,
employee_id INT UNSIGNED NOT NULL,
store_id INT UNSIGNED NOT NULL,
on_date DATE,
reason VARCHAR(100),
excused CHAR(1) DEFAULT 'Y' NOT NULL,
hrs_active INT UNSIGNED,
active CHAR(1) DEFAULT 'Y' NOT  NULL,
updated_by INT UNSIGNED NOT NULL,
updated_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY(id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

drop table employee_labor;
CREATE TABLE employee_labor(
id INT UNSIGNED NOT NULL AUTO_INCREMENT,
employee_id INT UNSIGNED NOT NULL,
store_id INT UNSIGNED NOT NULL,
on_date DATE,
time_from_hr_min INT UNSIGNED,
time_to_hr_min INT UNSIGNED,
position VARCHAR(20),
active CHAR(1) DEFAULT 'Y' NOT  NULL,
updated_by INT UNSIGNED NOT NULL,
updated_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY(id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;











